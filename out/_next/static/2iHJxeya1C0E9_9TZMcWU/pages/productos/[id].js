(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"2qVx":function(e,t,r){"use strict";r.r(t);var n=r("rePB");function c(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=r("o0o1"),o=r.n(a),i=r("wTIg"),s=r("q1tI"),u=r.n(s),l=r("nOHt"),d=r("7xvl"),b=r("1UYf"),p=r("xWvD"),m=r("80PL"),f=r("Gq1r"),g=r("qKvR"),j=r("sPpI"),O=r("DejG");u.a.createElement;function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=Object(i.a)("div",{target:"ekj0d3r0"})({name:"1feckq",styles:"@media (min-width:768px){display:grid;grid-template-columns:2fr 1fr;column-gap:2rem;}"}),x=Object(i.a)("p",{target:"ekj0d3r1"})({name:"2vahkx",styles:"padding:.5rem 2rem;background-color:#DA552F;color:#fff;text-transform:uppercase;font-weight:bold;display:inline-block;text-align:center;"}),w={name:"1ap128e",styles:"text-align:center;margin-top:5rem;"},P={name:"xqqg40",styles:"margin:2rem 0;"},k={name:"1x0f0jw",styles:"border:1px solid #e1e1e1;padding:2rem;"},q={name:"in3yi3",styles:"font-weight:bold;"},E={name:"aeoew",styles:"margin-top:5rem;"},S={name:"xi606m",styles:"text-align:center;"};t.default=function(){var e=Object(s.useState)({}),t=e[0],r=e[1],a=Object(s.useState)(!1),i=a[0],y=a[1],I=Object(s.useState)({}),A=I[0],C=I[1],D=Object(s.useState)(!0),F=D[0],V=D[1],z=Object(l.useRouter)(),N=z.query.id,T=Object(s.useContext)(p.a),_=T.firebase,R=T.usuario;if(Object(s.useEffect)((function(){if(N&&F){!function(){var e,t;o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(_.db.collection("productos").doc(N));case 2:return e=n.sent,n.next=5,o.a.awrap(e.get());case 5:(t=n.sent).exists?(r(t.data()),V(!1)):(y(!0),V(!1));case 7:case"end":return n.stop()}}),null,null,null,Promise)}()}}),[N]),0===Object.keys(t).length&&!i)return"Cargando...";var G=t.comentarios,W=t.creado,J=t.descripcion,K=t.empresa,L=t.nombre,U=t.url,X=t.urlimagen,B=t.votos,H=t.creador,Y=t.haVotado;return Object(g.c)(m.a,null,Object(g.c)(u.a.Fragment,null,i?Object(g.c)(f.a,null):Object(g.c)("div",{className:"contenedor"},Object(g.c)("h1",{css:w},L," "),Object(g.c)(h,null,Object(g.c)("div",null,Object(g.c)("p",null,"Publicado hace: ",Object(d.a)(new Date(W),{locale:b.a})," "),Object(g.c)("p",null,"Por: ",H.nombre," de ",K," "),Object(g.c)("img",{src:X}),Object(g.c)("p",null,J),R&&Object(g.c)(u.a.Fragment,null,Object(g.c)("h2",null,"Agrega tu comentario"),Object(g.c)("form",{onSubmit:function(e){if(e.preventDefault(),!R)return z.push("/login");A.usuarioId=R.uid,A.usuarioNombre=R.displayName;var n=[].concat(c(G),[A]);_.db.collection("productos").doc(N).update({comentarios:n}),r(v({},t,{comentarios:n})),V(!0)}},Object(g.c)(j.a,null,Object(g.c)("input",{type:"text",name:"mensaje",onChange:function(e){C(v({},A,Object(n.a)({},e.target.name,e.target.value)))}})),Object(g.c)(j.d,{type:"submit",value:"Agregar Comentario"}))),Object(g.c)("h2",{css:P},"Comentarios"),0===G.length?"A\xfan no hay comentarios":Object(g.c)("ul",null,G.map((function(e,t){return Object(g.c)("li",{key:"".concat(e.usuarioId,"-").concat(t),css:k},Object(g.c)("p",null,e.mensaje),Object(g.c)("p",null,"Escrito por:",Object(g.c)("span",{css:q},""," ",e.usuarioNombre)),function(e){if(H.id==e)return!0}(e.usuarioId)&&Object(g.c)(x,null,"Es Creador"))})))),Object(g.c)("aside",null,Object(g.c)(O.a,{target:"_blank",bgColor:"true",href:U},"Visitar URL"),Object(g.c)("div",{css:E},Object(g.c)("p",{css:S},B," Votos"),R&&Object(g.c)(O.a,{onClick:function(){if(!R)return z.push("/login");if(!Y.includes(R.uid)){var e=B+1,n=[].concat(c(Y),[R.uid]);_.db.collection("productos").doc(N).update({votos:e,haVotado:n}),r(v({},t,{votos:e})),V(!0)}}},"Votar")))),!!R&&(H.id===R.uid||void 0)&&Object(g.c)(O.a,{onClick:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(R){e.next=2;break}return e.abrupt("return",z.push("/login"));case 2:if(H.id===R.uid){e.next=4;break}return e.abrupt("return",z.push("/"));case 4:return e.prev=4,e.next=7,o.a.awrap(_.db.collection("productos").doc(N).delete());case 7:z.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log(e.t0);case 13:case"end":return e.stop()}}),null,null,[[4,10]],Promise)}},"Eliminar Producto"))))}},Gq1r:function(e,t,r){"use strict";var n=r("q1tI"),c=r.n(n),a=r("qKvR");c.a.createElement;var o={name:"u2wvoe",styles:"margin-top:5rem;text-align:center;"};t.a=function(){return Object(a.c)("h1",{css:o},"No se puede mostrar")}},"VWc+":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/productos/[id]",function(){return r("2qVx")}])},sPpI:function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return i}));var n=r("wTIg");var c=Object(n.a)("form",{target:"eei2zu80"})({name:"n77sy1",styles:"max-width:600px;width:95%;margin:5rem auto 0 auto;fieldset{margin:2rem 0;border:1px solid #e1e1e1;font-size:2rem;padding:2rem;}"}),a=Object(n.a)("div",{target:"eei2zu81"})({name:"118f3y4",styles:"margin-bottom:2rem;display:flex;align-items:center;label{flex:0 0 150px;font-size:1.8rem;}input,textarea{flex:1;padding:1rem;}textarea{height:400px;}"}),o=Object(n.a)("input",{target:"eei2zu82"})({name:"f9m508",styles:"background-color:var(--naranja);width:100%;padding:1.5rem;text-align:center;color:#FFF;font-size:1.8rem;text-transform:uppercase;border:none;font-family:'PT Sans',sans-serif;font-weight:700;&:hover{cursor:pointer;}"}),i=Object(n.a)("p",{target:"eei2zu83"})({name:"140d7jd",styles:"background-color:red;padding:1rem;font-family:'PT Sans',sans-serif;font-weight:700;font-size:1.4rem;color:#FFF;text-align:center;text-transform:uppercase;margin:2rem 0;"})}},[["VWc+",1,2,3,5,0,4,6,7]]]);